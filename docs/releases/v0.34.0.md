# furyctl release v0.34.0

Welcome to the latest release of `furyctl` maintained by SIGHUP by ReeVo team.

## New features ðŸŒŸ

- **Kubernetes 1.35.x Support:** Full compatibility with Kubernetes 1.35.0 through 1.35.5, supporting all three cluster types (OnPremises, EKS, KFDDistribution). This includes updated module versions for auth, logging, monitoring, and networking modules.

- **Enhanced Preflight Validations for Kubernetes 1.35:** Added comprehensive system-level preflight checks for OnPremises clusters including mandatory cgroup v2 verification and containerd 2.0+ validation. EKS and KFDDistribution clusters receive cluster-level compatibility warnings.

- **Kubernetes 1.34.x Support:** Added support for Kubernetes 1.34.0 and 1.34.1 to provide smooth upgrade path from 1.33.x to 1.35.x.

- **Module Breaking Changes Detection:** Implemented framework to detect and report incompatible module versions for Kubernetes 1.35, with clear migration guidance for:
  - auth module v0.6.0+ (WebSocket RBAC validation)
  - logging module v5.2.0+ (new audit log format)
  - monitoring module v4.0.1+ (Prometheus metrics updates)
  - networking module v3.0.0+ (CNI improvements)

## Changes ðŸ“

- **Updated Dependencies:** All Kubernetes dependencies updated from v0.30.7 to v0.35.0 across k8s.io packages and fury-distribution from v1.33.2-rc.0 to v1.35.0, with 30+ dependency replacements for consistent versioning.

- **Module Version Updates:** Updated minimum required versions for Kubernetes 1.35 compatibility:
  - auth: v0.6.0+
  - aws: v5.1.0+
  - dr (Velero): v3.2.0+
  - ingress: v4.1.1+
  - logging: v5.2.0+
  - monitoring: v4.0.1+
  - networking: v3.0.0+
  - opa: v1.15.0+
  - tracing: v1.3.0+

- **Tool Version Requirements:** Updated tool version requirements for Kubernetes 1.35:
  - kubectl: 1.35.x (must match cluster version)
  - kustomize: 5.6.0+
  - terraform: 1.4.6+
  - helm: 3.12.3+

## Breaking Changes ðŸ’”

### Critical System Requirements (OnPremises Only)

- **cgroup v2 Requirement:** Kubernetes 1.35 requires cgroup v2 support on OnPremises clusters. Systems with cgroup v1 must upgrade to supported OS versions:
  - Ubuntu 22.04 LTS or newer (upgrade from 20.04)
  - RHEL/CentOS 9 or newer (upgrade from 8)
  - Debian 12 or newer
  - AlmaLinux 9 or newer

  See [K8S-1.35-BREAKING-CHANGES.md](../K8S-1.35-BREAKING-CHANGES.md#critical-breaking-change-cgroupv2-requirement) for detailed upgrade instructions.

- **containerd 2.0+ Requirement:** OnPremises clusters require containerd 2.0.0 or later. containerd 1.x versions are EOL and no longer supported. Upgrade before cluster creation:
  ```bash
  # Ubuntu/Debian
  sudo apt-get update
  sudo apt-get install -y containerd.io=2.0.0

  # RHEL/CentOS
  sudo yum update -y containerd
  ```

### Module Breaking Changes

- **WebSocket RBAC Validation (auth v0.5.0 â†’ v0.6.0):** Authentication is now required for WebSocket connections. Update RBAC policies to explicitly allow WebSocket endpoints. See [WebSocket RBAC Migration Guide](../K8S-1.35-BREAKING-CHANGES.md#breaking-change-1-websocket-rbac-validation).

- **New Audit Log Format (logging v5.1.0 â†’ v5.2.0):** Kubernetes 1.35 introduces new audit log fields. Update log parsing rules and Elasticsearch ingestion configurations. See [Audit Log Format Migration Guide](../K8S-1.35-BREAKING-CHANGES.md#breaking-change-2-new-audit-log-format).

- **Prometheus Metrics Changes (monitoring v4.0.0 â†’ v4.0.1):** Some metric names changed in Kubernetes 1.35. Update Grafana dashboards and Prometheus alert rules with new metric names. See [Prometheus Metrics Migration Guide](../K8S-1.35-BREAKING-CHANGES.md#breaking-change-3-prometheus-metrics-renamed).

- **Network Policy Enforcement (networking v3.0.0):** Network policies are more strictly enforced in Kubernetes 1.35. Verify existing network policies and add explicit policies for cross-namespace communication if needed. See [Network Policy Migration Guide](../K8S-1.35-BREAKING-CHANGES.md#breaking-change-4-network-policy-enforcement).

### Deprecations âš ï¸

- **IPVS kube-proxy Mode:** IPVS mode is deprecated in Kubernetes 1.35 and will be removed in Kubernetes 1.36. Plan migration to nftables for next cluster update.

## Migration Instructions

### Before Upgrading

1. **Review Compatibility:** Check [COMPATIBILITY-MATRIX.md](../COMPATIBILITY-MATRIX.md) to ensure all modules meet minimum version requirements for Kubernetes 1.35.

2. **Verify System Requirements (OnPremises):**
   ```bash
   # Check cgroup version
   stat -fc %T /sys/fs/cgroup/
   # Expected: cgroup2fs

   # Check containerd version
   containerd --version
   # Expected: v2.0.0 or later
   ```

3. **Backup Cluster State:**
   ```bash
   # Backup etcd
   sudo systemctl stop etcd || true
   sudo cp -r /var/lib/etcd /var/lib/etcd.backup.pre-1.35
   sudo systemctl start etcd || true

   # Backup kubeconfig
   cp ~/.kube/config ~/.kube/config.backup.1.34

   # Backup all cluster resources
   kubectl get all -A -o yaml > cluster-state.1.34.yaml
   ```

### Upgrade Steps

1. **Update furyctl Configuration:**
   ```yaml
   apiVersion: kfd.sighup.io/v1alpha2
   kind: OnPremises  # or EKSCluster, KFDDistribution
   spec:
     distributionVersion: v1.35.0  # Change from v1.34.x
     # Update modules to minimum required versions
     modules:
       auth: v0.6.0
       logging: v5.2.0
       monitoring: v4.0.1
       networking: v3.0.0
   ```

2. **Run Preflight Validations:**
   ```bash
   furyctl create --config furyctl.yaml --dry-run
   ```
   Address any BLOCKER issues before proceeding.

3. **Execute Upgrade:** Follow cluster type-specific steps in [K8S-1.35-UPGRADE-GUIDE.md](../K8S-1.35-UPGRADE-GUIDE.md)

4. **Validate Post-Upgrade:**
   ```bash
   ./scripts/validate-k8s-1.35.sh
   kubectl version --short
   kubectl get nodes
   kubectl get pods -A
   ```

## Detailed Documentation

- **Compatibility Matrix:** [COMPATIBILITY-MATRIX.md](../COMPATIBILITY-MATRIX.md) - Comprehensive support matrix for all versions
- **Upgrade Guide:** [K8S-1.35-UPGRADE-GUIDE.md](../K8S-1.35-UPGRADE-GUIDE.md) - Step-by-step upgrade procedures
- **Breaking Changes:** [K8S-1.35-BREAKING-CHANGES.md](../K8S-1.35-BREAKING-CHANGES.md) - Detailed breaking changes and migration instructions
- **Testing Guide:** [K8S-1.35-TESTING.md](../K8S-1.35-TESTING.md) - Comprehensive testing procedures

## Known Limitations

- **Downgrade from 1.35 to 1.34:** Possible but not recommended. Requires etcd restoration.
- **Direct upgrade from 1.33 or earlier:** Must upgrade through 1.34.x first. Direct upgrade from 1.33 to 1.35 is not supported.
- **API Deprecations:** Some older API versions (apps/v1beta1, etc.) have been removed. Update manifests to use v1 API versions.

## Installation

To upgrade to v0.34.0:

```bash
# Download the latest release
curl -L https://github.com/sighupio/furyctl/releases/download/v0.34.0/furyctl-linux-amd64 -o furyctl
chmod +x furyctl

# Verify version
./furyctl version
# Expected: v0.34.0
```

## Tested Platforms

- **OnPremises Clusters:** Ubuntu 22.04+, RHEL/CentOS 9+, Debian 12+, AlmaLinux 9+ with Kubernetes 1.35.x
- **EKS Clusters:** AWS regions with Kubernetes 1.35.x support, Amazon Linux 2+
- **KFDDistribution:** Any existing Kubernetes 1.35 cluster with required modules

## Support and Feedback

- Report issues: [GitHub Issues](https://github.com/sighupio/furyctl/issues)
- Documentation: [SIGHUP Distribution Documentation](https://docs.fury.sighup.io)
- Changelog: Full commit history available on [GitHub](https://github.com/sighupio/furyctl/releases/tag/v0.34.0)

## Special Thanks

Special thanks to the SIGHUP Distribution team for validating Kubernetes 1.35 compatibility across all modules and cluster types.

---

**furyctl v0.34.0** is production-ready and recommended for all Kubernetes 1.35 deployments.
